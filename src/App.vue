<script setup lang="ts">
// 自动导入 TheHeader（因为配置了 unplugin-vue-components）
import TheHeader from './components/TheHeader.vue';
// 自动导入 TheFooter
import TheFooter from './components/TheFooter.vue'; 
// VueUse 的 useDark, useToggle, usePreferredDark 都会被自动导入

// 1. 设置颜色模式管理
// 默认使用 'class' 模式，这意味着 UnoCSS (或 Tailwind) 将通过 body/html 上的 'dark' 类名来切换样式

// 2. 将 useDark 暴露给全局，方便在任何地方使用
import { useDark } from '@vueuse/core';


// 移除对 'isDark' 变量的声明
useDark({
  selector: 'html',
  attribute: 'class',
  valueDark: 'dark',
  valueLight: 'light',
});

// ⚠️ 将这两个变量暴露给 window/全局 context，以便在其他组件中访问
// 💡 在更大型的应用中，我们通常会创建一个 Store 或 Provider 来传递这些状态
// 但对于简单项目，我们可以通过一个简单的 composable 或全局暴露来实现切换
// 由于我们希望在 Header 中使用，最好的方法是将 toggleDark 放到 useUser 或新建一个 useTheme composable

// 考虑到简单性，我们现在将切换按钮直接放在 Header 中，并在 Header 中定义 toggleDark
</script>

<template>
  <div class="min-h-screen flex flex-col dark:bg-gray-900">
    
    <TheHeader />

    <main class="flex-grow">
      <RouterView v-slot="{ Component }">
        <Transition name="fade" mode="out-in">
          <component :is="Component" />
        </Transition>
      </RouterView>
    </main>
    
    <TheFooter />
  </div>
</template>

<style>
/* ---------------------------------- */
/* 路由过渡效果 (淡入淡出) */
/* ---------------------------------- */

/* 离开前的状态 */
.fade-leave-active {
  transition: opacity 0.3s ease; /* 离开时过渡 0.3s */
}

/* 进入时的状态 */
.fade-enter-active {
  transition: opacity 0.3s ease 0.3s; /* 进入时延迟 0.3s (等离开动画结束) */
}

/* 离开和进入时的不透明度 */
.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}
</style>