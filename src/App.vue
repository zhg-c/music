<script setup lang="ts">
// è‡ªåŠ¨å¯¼å…¥ TheHeaderï¼ˆå› ä¸ºé…ç½®äº† unplugin-vue-componentsï¼‰
import TheHeader from './components/TheHeader.vue';
// è‡ªåŠ¨å¯¼å…¥ TheFooter
import TheFooter from './components/TheFooter.vue'; 
// VueUse çš„ useDark, useToggle, usePreferredDark éƒ½ä¼šè¢«è‡ªåŠ¨å¯¼å…¥

// 1. è®¾ç½®é¢œè‰²æ¨¡å¼ç®¡ç†
// é»˜è®¤ä½¿ç”¨ 'class' æ¨¡å¼ï¼Œè¿™æ„å‘³ç€ UnoCSS (æˆ– Tailwind) å°†é€šè¿‡ body/html ä¸Šçš„ 'dark' ç±»åæ¥åˆ‡æ¢æ ·å¼
import { useColorMode } from '@vueuse/core';
const mode = useColorMode({
  storageKey: 'music-color-scheme', // å­˜å‚¨åœ¨ localStorage ä¸­çš„é”®å
  attribute: 'class', // åˆ‡æ¢ 'dark' ç±»å
  initialValue: 'auto', // ä¼˜å…ˆæ ¹æ®ç³»ç»Ÿåå¥½è®¾ç½®
});

// 2. å°† useDark æš´éœ²ç»™å…¨å±€ï¼Œæ–¹ä¾¿åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨
import { useDark } from '@vueuse/core';
const isDark = useDark({
    // ç›‘å¬ mode å˜åŒ–
    storageKey: 'music-color-scheme',
});

// 3. å°†åˆ‡æ¢å‡½æ•°æš´éœ²ç»™ Header
import { useToggle } from '@vueuse/core';
const toggleDark = useToggle(isDark);

// âš ï¸ å°†è¿™ä¸¤ä¸ªå˜é‡æš´éœ²ç»™ window/å…¨å±€ contextï¼Œä»¥ä¾¿åœ¨å…¶ä»–ç»„ä»¶ä¸­è®¿é—®
// ğŸ’¡ åœ¨æ›´å¤§å‹çš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåˆ›å»ºä¸€ä¸ª Store æˆ– Provider æ¥ä¼ é€’è¿™äº›çŠ¶æ€
// ä½†å¯¹äºç®€å•é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„ composable æˆ–å…¨å±€æš´éœ²æ¥å®ç°åˆ‡æ¢
// ç”±äºæˆ‘ä»¬å¸Œæœ›åœ¨ Header ä¸­ä½¿ç”¨ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯å°† toggleDark æ”¾åˆ° useUser æˆ–æ–°å»ºä¸€ä¸ª useTheme composable

// è€ƒè™‘åˆ°ç®€å•æ€§ï¼Œæˆ‘ä»¬ç°åœ¨å°†åˆ‡æ¢æŒ‰é’®ç›´æ¥æ”¾åœ¨ Header ä¸­ï¼Œå¹¶åœ¨ Header ä¸­å®šä¹‰ toggleDark
</script>

<template>
  <div class="min-h-screen flex flex-col dark:bg-gray-900">
    
    <TheHeader />

    <main class="flex-grow">
      <RouterView />
    </main>
    
    <TheFooter />
  </div>
</template>

<style>
/* ... */
</style>