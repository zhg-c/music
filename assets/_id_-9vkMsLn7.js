import{d as h,c as m,r as b,m as f,n as _,a as n,b as t,t as l,p,f as k,u as w,o as d,q as E,l as L,h as C,_ as P}from"./index-Ckcy-aDa.js";const R={class:"p-8 max-w-screen-xl mx-auto min-h-full"},B={key:0,class:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl"},I={class:"mb-8 border-b dark:border-gray-700 pb-4"},N={class:"text-4xl font-extrabold text-gray-900 dark:text-white mb-2"},S={class:"mt-8"},T={class:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg shadow-inner"},U=["src"],D={class:"flex justify-center py-4 border-t border-b border-gray-300 dark:border-gray-700"},V=["src","alt"],j={key:1,class:"text-center py-20"},q={class:"mt-4 text-gray-500 dark:text-gray-400"},z=h({__name:"[id]",setup(M){const x=L(),g=E(),u=m(()=>Number(x.params.id)),o=m(()=>C.find(s=>s.id===u.value)),r=b(!1),e=b(null),y=()=>{const s=e.value;s&&(s.paused?s.play():s.pause())},i=()=>{r.value=!0},c=()=>{r.value=!1},v=()=>{r.value=!1,e.value&&(e.value.currentTime=0)};return f(()=>{e.value&&(e.value.pause(),e.value.currentTime=0,e.value.removeEventListener("play",i),e.value.removeEventListener("pause",c),e.value.removeEventListener("ended",v))}),_(()=>{e.value&&(e.value.addEventListener("play",i),e.value.addEventListener("pause",c),e.value.addEventListener("ended",v))}),(s,a)=>(d(),n("div",R,[o.value?(d(),n("div",B,[t("header",I,[t("h1",N,l(o.value.title),1)]),t("section",S,[a[2]||(a[2]=t("h2",{class:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-3 border-l-4 border-green-500 pl-3"}," 曲谱视图与播放 ",-1)),t("div",T,[t("audio",{ref_key:"audioRef",ref:e,src:o.value.audioUrl,preload:"auto",class:"hidden"},null,8,U),t("button",{onClick:y,class:p(["mb-4 inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white transition duration-150",r.value?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"])},[t("div",{class:p([r.value?"i-carbon-pause":"i-carbon-play","mr-2"])},null,2),k(" "+l(r.value?"暂停播放":"点击播放"),1)],2),t("div",D,[t("img",{src:o.value.imageUrl,alt:o.value.title+" 简谱",class:"max-w-full h-auto rounded-lg shadow-xl dark:shadow-none",style:{"max-height":"80vh"}},null,8,V)]),a[1]||(a[1]=t("p",{class:"mt-4 text-xs text-gray-500 dark:text-gray-400"}," 当前功能已切换为播放外部音频文件。请确保音频和图片文件存在于项目中的正确路径下。 ",-1))])])])):(d(),n("div",j,[a[3]||(a[3]=t("h1",{class:"text-3xl font-semibold text-gray-500 dark:text-gray-400"},"曲谱未找到",-1)),t("p",q,"ID 为 "+l(u.value)+" 的曲谱不存在。",1),t("button",{onClick:a[0]||(a[0]=$=>w(g).push("/scores")),class:"mt-6 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition"}," 返回曲谱列表 ")]))]))}}),F=P(z,[["__scopeId","data-v-3a53ba1a"]]);export{F as default};
