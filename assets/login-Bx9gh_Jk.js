import{d as _,r as g,a,b as t,t as l,u as n,j as V,k as C,l as L,m as N,w as c,v as p,g as d,h as U,i as u,p as q,q as B}from"./index-f3_TcQCT.js";const R={class:"p-8 max-w-sm mx-auto min-h-full flex flex-col justify-center"},j={class:"text-3xl font-extrabold text-gray-900 dark:text-white mb-8 text-center"},D={key:0,class:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl text-center"},E={class:"text-xl font-semibold dark:text-white mb-2"},M={class:"text-gray-500 dark:text-gray-400 mb-6"},S={key:0,class:"p-3 bg-red-100 dark:bg-red-900/50 border border-red-300 rounded text-red-700 dark:text-red-300"},z=_({__name:"login",setup(T){const{isAuthenticated:x,currentUser:b,login:f,logout:v}=q(),m=B(),s=g(""),o=g(""),r=g(""),k=()=>{if(r.value="",!s.value||!o.value){r.value="用户名和密码不能为空。";return}f(s.value,o.value)?(alert("登录成功！欢迎回来。"),m.push("/scores")):r.value="登录失败：模拟密码验证失败。"},y=()=>{v(),alert("已安全登出。"),m.push("/")};return(w,e)=>{const h=U("RouterLink");return u(),a("div",R,[t("h1",j,l(n(x)?"用户中心":"登录 / 注册"),1),n(x)?(u(),a("div",D,[e[3]||(e[3]=t("div",{class:"i-carbon-user-avatar-filled text-6xl text-green-600 mb-4 mx-auto"},null,-1)),t("p",E," 欢迎您，"+l(n(b)?.username),1),t("p",M,l(n(b)?.email),1),V(h,{to:"/scores",class:"block w-full text-green-600 hover:underline mb-4"},{default:C(()=>[...e[2]||(e[2]=[d(" 进入高清曲谱库 ",-1)])]),_:1}),t("button",{onClick:y,class:"w-full py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition duration-150"}," 安全登出 ")])):(u(),a("form",{key:1,onSubmit:L(k,["prevent"]),class:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl space-y-6"},[r.value?(u(),a("div",S,l(r.value),1)):N("",!0),t("div",null,[e[4]||(e[4]=t("label",{for:"username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"用户名",-1)),c(t("input",{id:"username",type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>s.value=i),placeholder:"请输入用户名",required:"",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[p,s.value]])]),t("div",null,[e[5]||(e[5]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"密码",-1)),c(t("input",{id:"password",type:"password","onUpdate:modelValue":e[1]||(e[1]=i=>o.value=i),placeholder:"请输入密码",required:"",class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[p,o.value]])]),e[6]||(e[6]=t("button",{type:"submit",class:"w-full py-3 text-white bg-green-600 rounded-lg font-semibold hover:bg-green-700 transition duration-150 shadow-md"},[t("div",{class:"i-carbon-login inline-block mr-2"}),d(" 登录账户 ")],-1)),e[7]||(e[7]=t("p",{class:"text-center text-sm text-gray-500 dark:text-gray-400 pt-2"},[d(" 还没有账户？"),t("a",{href:"#",class:"text-green-600 hover:underline"},"立即注册"),d(" (模拟) ")],-1))],32))])}}});export{z as default};
