ä¸€ã€åˆ›å»ºä¸€ä¸ªviteé¡¹ç›®åï¼Œéœ€è¦å®‰è£…çš„æ‰€æœ‰åŒ…æœ‰å“ªäº›

åˆ›å»ºä¸€ä¸ªä½¿ç”¨ Vue 3ã€Vite ä½œä¸ºæ„å»ºå·¥å…·ï¼Œå¹¶ç»“åˆ UnoCSS è¿›è¡Œæ ·å¼è®¾è®¡çš„ç°ä»£åŒ–é¡¹ç›®ï¼Œä½ éœ€è¦å®‰è£…ä»¥ä¸‹å‡ ç±»åŒ…ã€‚

è¿™é‡Œåˆ—å‡ºäº†æ ¸å¿ƒä¾èµ–ã€å¼€å‘ä¾èµ–ä»¥åŠæˆ‘ä»¬å‰é¢è®¨è®ºè¿‡çš„å¸¸ç”¨æ’ä»¶å’Œæ ·å¼åº“ã€‚

ğŸš€ æ ¸å¿ƒä¾èµ– (Dependencies)
è¿™äº›æ˜¯åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œæ‰€å¿…éœ€çš„åº“ã€‚

åŒ…å	ä½œç”¨	å®‰è£…å‘½ä»¤ç¤ºä¾‹
vue	Vue.js 3 æ ¸å¿ƒåº“ï¼Œç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢ã€‚	npm install vue
vue-router	Vue.js å®˜æ–¹è·¯ç”±ç®¡ç†åº“ï¼Œç”¨äºå¤„ç†é¡µé¢å¯¼èˆªã€‚	npm install vue-router
axios	åŸºäº Promise çš„ HTTP å®¢æˆ·ç«¯ï¼Œç”¨äºä¸åç«¯ API é€šä¿¡ï¼ˆå¦‚ç™»å½•ã€æ³¨å†Œï¼‰ã€‚	npm install axios
ğŸ› ï¸ å¼€å‘ä¾èµ– (DevDependencies)
è¿™äº›æ˜¯åªåœ¨å¼€å‘ã€æ„å»ºå’Œæ‰“åŒ…è¿‡ç¨‹ä¸­éœ€è¦çš„å·¥å…·å’Œæ’ä»¶ã€‚

A. Vite æ ¸å¿ƒä¸ Vue æ”¯æŒ
åŒ…å	ä½œç”¨	å®‰è£…å‘½ä»¤ç¤ºä¾‹
vite	æé€Ÿå‰ç«¯æ„å»ºå·¥å…·ï¼Œæ ¸å¿ƒæ‰“åŒ…å™¨ã€‚	npm install -D vite
@vitejs/plugin-vue	Vite å®˜æ–¹ Vue å•æ–‡ä»¶ç»„ä»¶æ”¯æŒæ’ä»¶ã€‚	npm install -D @vitejs/plugin-vue
typescript	ç”¨äº Vue 3 çš„ TypeScript ç¼–è¯‘å™¨ã€‚	npm install -D typescript
B. UnoCSS æ ·å¼æ¡†æ¶
åŒ…å	ä½œç”¨	å®‰è£…å‘½ä»¤ç¤ºä¾‹
unocss	UnoCSS æ ¸å¿ƒåº“å’Œé»˜è®¤é¢„è®¾ (presetUno)ï¼Œæä¾›åŸºç¡€çš„å·¥å…·ç±»ã€‚	npm install -D unocss
unocss/vite	UnoCSS çš„ Vite æ’ä»¶ã€‚	(é€šå¸¸éš unocss ä¸€èµ·å®‰è£…ï¼Œä½†è¿™é‡Œå¼ºè°ƒ)
@unocss/preset-icons	å›¾æ ‡é¢„è®¾ï¼Œè®©ä½ èƒ½é€šè¿‡ç±»åä½¿ç”¨ Carbon ç­‰å¤§é‡å›¾æ ‡é›†ã€‚	npm install -D @unocss/preset-icons
C. å¢å¼ºå¼€å‘ä½“éªŒçš„æ’ä»¶
åŒ…å	ä½œç”¨	å®‰è£…å‘½ä»¤ç¤ºä¾‹
vite-plugin-pages	æ–‡ä»¶ç³»ç»Ÿè·¯ç”±æ’ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆè·¯ç”±é…ç½®ï¼ˆè§£å†³ä½ ä¸Šä¸€ä¸ªé”™è¯¯ï¼‰ã€‚	npm install -D vite-plugin-pages
unplugin-vue-components	è‡ªåŠ¨å¯¼å…¥ Vue ç»„ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨ importã€‚	npm install -D unplugin-vue-components
unplugin-auto-import	è‡ªåŠ¨å¯¼å…¥ Composition API å‡½æ•°ï¼ˆå¦‚ ref, computedï¼‰å’Œ Vueuse åº“å‡½æ•°ã€‚	npm install -D unplugin-auto-import
@vueuse/core	ä¸€ç»„æœ‰ç”¨çš„ Composition API å·¥å…·å‡½æ•°ï¼ˆè™½ç„¶æ˜¯ä¾èµ–ï¼Œä½†è¿™é‡ŒæŒ‰éœ€å®‰è£…ï¼‰ã€‚	npm install @vueuse/core
ğŸ’» å®Œæ•´çš„å®‰è£…å‘½ä»¤æ€»ç»“
è¦ä¸€ç«™å¼å®‰è£…æ‰€æœ‰è¿™äº›æ ¸å¿ƒå·¥å…·å’Œæ’ä»¶ï¼Œä½ å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

1. å®‰è£…æ ¸å¿ƒä¾èµ–
Bash
npm install vue vue-router axios @vueuse/core
2. å®‰è£…å¼€å‘ä¾èµ–å’Œå·¥å…·
Bash
npm install -D vite @vitejs/plugin-vue typescript unocss unocss/vite @unocss/preset-icons vite-plugin-pages unplugin-vue-components unplugin-auto-import
å®‰è£…å®Œæˆåï¼Œåˆ«å¿˜äº†é…ç½®ä½ çš„ vite.config.ts æ–‡ä»¶ä»¥æ¿€æ´»æ‰€æœ‰æ’ä»¶ï¼

vite.config.ts æ–‡ä»¶ä»¥æ¿€æ´»æ‰€æœ‰æ’ä»¶ï¼è¿™æ­¥å¦‚ä½•åš

å¥½çš„ï¼Œè¦æ¿€æ´»å’Œé…ç½®ä½ å®‰è£…çš„æ‰€æœ‰æ’ä»¶ï¼Œä½ éœ€è¦ä¿®æ”¹ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ vite.config.ts æ–‡ä»¶ã€‚

ä»¥ä¸‹æ˜¯é’ˆå¯¹ä½ å®‰è£…çš„é‚£äº›æµè¡ŒåŒ…ï¼ˆVueã€UnoCSSã€è‡ªåŠ¨å¯¼å…¥ã€æ–‡ä»¶ç³»ç»Ÿè·¯ç”±ç­‰ï¼‰çš„å®Œæ•´é…ç½®æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ã€‚

å®Œæ•´çš„ vite.config.ts é…ç½®ç¤ºä¾‹
é¦–å…ˆï¼Œä½ éœ€è¦ç¡®ä¿æ‰€æœ‰çš„å¯¼å…¥éƒ½æ˜¯æ­£ç¡®çš„ã€‚

1. å®Œæ•´ä»£ç 
å°†è¿™æ®µä»£ç å¤åˆ¶åˆ°ä½ çš„ vite.config.ts æ–‡ä»¶ä¸­ï¼š

TypeScript
// vite.config.ts

import { defineConfig } from 'vite'

// å¯¼å…¥æ‰€æœ‰æ’ä»¶
import vue from '@vitejs/plugin-vue'
import Pages from 'vite-plugin-pages'
import Components from 'unplugin-vue-components/vite'
import AutoImport from 'unplugin-auto-import/vite'
import UnoCSS from 'unocss/vite'
import { presetUno } from 'unocss' // æ ¸å¿ƒ UnoCSS é¢„è®¾
import { presetIcons } from '@unocss/preset-icons' // å›¾æ ‡é¢„è®¾

// å¦‚æœé¡¹ç›®éƒ¨ç½²åœ¨å­ç›®å½•ï¼ˆä¾‹å¦‚ GitHub Pagesï¼‰ï¼Œå¯èƒ½éœ€è¦è®¾ç½® REPO_NAME
const REPO_NAME = 'life'

export default defineConfig(({ command }) => {
  const isProd = command === 'build'
  
  return {
    // åŸºç¡€è·¯å¾„é…ç½®
    base: isProd ? `/${REPO_NAME}/` : '/',

    plugins: [
      // 1. Vue 3 æ ¸å¿ƒæ”¯æŒ
      vue(),

      // 2. æ–‡ä»¶ç³»ç»Ÿè·¯ç”± (vite-plugin-pages)
      // è‡ªåŠ¨å°† src/pages ä¸‹çš„æ–‡ä»¶æ˜ å°„ä¸ºè·¯ç”±
      Pages(),

      // 3. ç»„ä»¶è‡ªåŠ¨å¯¼å…¥ (unplugin-vue-components)
      // è‡ªåŠ¨å¯¼å…¥ src/components ç›®å½•ä¸‹çš„ Vue ç»„ä»¶
      Components({
        dts: true, // ç”Ÿæˆ TypeScript å£°æ˜æ–‡ä»¶
        // ç¡®ä¿å®ƒæ‰«æå¹¶è‡ªåŠ¨æ³¨å†Œä½ çš„ç»„ä»¶
        dirs: ['src/components'], 
      }),

      // 4. API è‡ªåŠ¨å¯¼å…¥ (unplugin-auto-import)
      // è‡ªåŠ¨å¯¼å…¥ Composition APIã€Vue-Router å’Œ VueUse çš„å‡½æ•°
      AutoImport({
        imports: [
          'vue', 
          'vue-router', 
          '@vueuse/core'
        ],
        dts: true, // ç”Ÿæˆ TypeScript å£°æ˜æ–‡ä»¶
        vueTemplate: true, // åœ¨ Vue æ¨¡æ¿ä¸­ä¹Ÿå¯ç”¨è‡ªåŠ¨å¯¼å…¥
      }),

      // 5. UnoCSS æ ·å¼æ¡†æ¶
      UnoCSS({
        presets: [
          // æ ¸å¿ƒ UnoCSS é¢„è®¾ï¼ˆåŒ…å«åŸºç¡€å·¥å…·ç±»ï¼‰
          presetUno(), 
          // å›¾æ ‡é¢„è®¾ï¼ˆå¯ç”¨ i-carbon-dashboard ç­‰å›¾æ ‡ç±»ï¼‰
          presetIcons({
            scale: 1.2, // å¯é€‰ï¼šè®¾ç½®å›¾æ ‡ç¼©æ”¾æ¯”ä¾‹
            warn: true, // å¯ç”¨è­¦å‘Šï¼Œå¸®åŠ©è°ƒè¯•æœªæ‰¾åˆ°çš„å›¾æ ‡
          }),
        ],
      }),
    ],
    
    // å…¶ä»–é…ç½®ï¼ˆä¾‹å¦‚ TypeScript åˆ«åç­‰ï¼‰
    resolve: {
      alias: {
        '@': '/src',
      },
    },
  }
})
2. æ¿€æ´»æ­¥éª¤è¯´æ˜
æ·»åŠ å¯¼å…¥è¯­å¥ï¼š ç¡®ä¿æ–‡ä»¶é¡¶éƒ¨æœ‰æ‰€æœ‰éœ€è¦çš„ import è¯­å¥ã€‚

è°ƒç”¨æ’ä»¶ï¼š åœ¨ defineConfig è¿”å›å¯¹è±¡çš„ plugins æ•°ç»„ä¸­ï¼Œå°†æ‰€æœ‰å¯¼å…¥çš„æ’ä»¶å‡½æ•°è°ƒç”¨ä¸€éã€‚

ä¾‹å¦‚ï¼šPages()ï¼ŒComponents({...})ï¼ŒUnoCSS({...})ã€‚

é…ç½® UnoCSSï¼š åœ¨ UnoCSS({...}) ä¸­ï¼Œé€šè¿‡ presets æ•°ç»„ä¼ å…¥æ ¸å¿ƒé¢„è®¾ presetUno() å’Œå›¾æ ‡é¢„è®¾ presetIcons()ï¼Œè¿™æ ·ä½ çš„æ ·å¼ç³»ç»Ÿå°±å®Œæ•´äº†ã€‚

3. åç»­æ­¥éª¤
é…ç½®å®Œæˆåï¼Œè¯·ç¡®ä¿ä½ çš„é¡¹ç›®ç»“æ„æ»¡è¶³è¿™äº›æ’ä»¶çš„é»˜è®¤çº¦å®šï¼š

è·¯ç”±ï¼š åœ¨ src ç›®å½•ä¸‹åˆ›å»º pages æ–‡ä»¶å¤¹ï¼Œä½ çš„é¡µé¢ç»„ä»¶ï¼ˆå¦‚ src/pages/index.vueï¼‰å°†è‡ªåŠ¨æˆä¸ºè·¯ç”±ã€‚

ç»„ä»¶ï¼š åœ¨ src ç›®å½•ä¸‹åˆ›å»º components æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­çš„ç»„ä»¶å°†è‡ªåŠ¨è¢«å¯¼å…¥ã€‚

å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š è¿è¡Œ npm run devï¼ŒVite å°†åŠ è½½ä½ çš„æ–°é…ç½®å¹¶å¯åŠ¨æ‰€æœ‰æ’ä»¶ã€‚

presetUno' is deprecated.ts(6385 è¿™æ˜¯ä»€ä¹ˆ

è¿™æ˜¯ä¸€ä¸ªå…³äº UnoCSS é…ç½® çš„ TypeScript è­¦å‘Šï¼Œæ„å‘³ç€ä½ æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªå·²ç»è¢«æ ‡è®°ä¸ºâ€œå¼ƒç”¨â€ï¼ˆdeprecatedï¼‰çš„å¯¼å…¥æ–¹å¼ã€‚

è­¦å‘Šå†…å®¹è§£æ
presetUno' is deprecated.ts(6385)

presetUnoï¼š è¿™æ˜¯ UnoCSS ä¸­æä¾›æ‰€æœ‰åŸºç¡€å·¥å…·ç±»ï¼ˆä¾‹å¦‚ flex, bg-red-500, text-lg ç­‰ï¼‰çš„æ ¸å¿ƒé¢„è®¾ã€‚

is deprecatedï¼š è¡¨ç¤ºè¿™ä¸ªå‘½åå¯¼å‡ºï¼ˆNamed Exportï¼‰åœ¨ UnoCSS çš„æ–°ç‰ˆæœ¬ä¸­å·²ç»è¢«å¼€å‘è€…ä¸æ¨èä½¿ç”¨äº†ã€‚

åŸå› ï¼š

UnoCSS çš„è®¾è®¡è€…å°†æ ¸å¿ƒé¢„è®¾ä»å‘½åå¯¼å‡º import { presetUno } from 'unocss' åˆ‡æ¢åˆ°äº† é»˜è®¤å¯¼å‡º (import preset from 'unocss')ï¼Œä»¥ä¾¿ç®€åŒ–é…ç½®ï¼Œå¹¶éµå¾ªæ›´ç°ä»£çš„ ES æ¨¡å—è§„èŒƒã€‚

å¦‚ä½•è§£å†³ (æœ€ç»ˆæ­£ç¡®çš„è§£å†³æ–¹æ¡ˆ)
è™½ç„¶ä½ ä¹‹å‰å¯èƒ½å°è¯•è¿‡é»˜è®¤å¯¼å…¥ä½†é‡åˆ°äº†å…¶ä»–é”™è¯¯ï¼ˆå¦‚ does not provide an export named 'default'ï¼‰ï¼Œä½†è¿™æ˜¯å› ä¸ºä½ çš„ Node.js æˆ– Vite ç¯å¢ƒè§£ææ¨¡å—çš„æ–¹å¼å¯¼è‡´çš„ã€‚

æœ€æ ‡å‡†çš„è§£å†³æ–¹æ¡ˆæ˜¯åˆ‡æ¢åˆ°é»˜è®¤å¯¼å‡ºã€‚å¦‚æœä½ çš„ç¯å¢ƒä»ç„¶æŠ¥é”™ï¼Œé‚£å¯èƒ½æ„å‘³ç€ä½ çš„ UnoCSS ç‰ˆæœ¬æˆ–å…¶ä¾èµ–ï¼ˆå¦‚ Node/Viteï¼‰ç‰ˆæœ¬å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚

æ­¥éª¤ 1: ä½¿ç”¨æ­£ç¡®çš„é»˜è®¤å¯¼å…¥æ–¹å¼
è¿™æ˜¯ UnoCSS å®˜æ–¹æ¨èçš„æ¶ˆé™¤æ­¤è­¦å‘Šçš„æ–¹å¼ï¼š

åœ¨ä½ çš„ vite.config.ts æ–‡ä»¶ä¸­ï¼Œè¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š

TypeScript
// vite.config.ts

// âŒ ç§»é™¤è¿™ä¸ªå·²å¼ƒç”¨çš„å‘½åå¯¼å‡º
// import { presetUno } from 'unocss' 

// âœ… æ›¿æ¢ä¸ºæ­£ç¡®çš„é»˜è®¤å¯¼å‡º
import preset from 'unocss' // ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•åç§°ï¼Œä¾‹å¦‚ 'presetUnoCore'

// ... å…¶ä»–å¯¼å…¥ä¿æŒä¸å˜

export default defineConfig(({ command }) => {
  // ...
  return {
    plugins: [
      // ...
      UnoCSS({
        presets: [
          // âœ… åœ¨è¿™é‡Œè°ƒç”¨ä½ æ–°çš„å¯¼å…¥åç§°
          preset(), 
          presetIcons({
            // ...
          }),
        ],
      }),
    ],
    // ...
  }
})
æ­¥éª¤ 2: å¦‚æœä»ç„¶å‡ºç°æ¨¡å—å¯¼å…¥é”™è¯¯
å¦‚æœä½ åœ¨è¿›è¡Œäº†ä¸Šè¿°æ›´æ”¹åï¼ŒVite å¯åŠ¨æ—¶ä»ç„¶æŠ¥ SyntaxError: ... does not provide an export named 'default' é”™è¯¯ï¼Œè¿™æ„å‘³ç€ä½ çš„ç¯å¢ƒæ— æ³•æ­£ç¡®è¯†åˆ« UnoCSS çš„é»˜è®¤å¯¼å‡ºã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥ï¼š

æ›´æ–°ä¾èµ–ï¼š è¿è¡Œ npm update unocssã€‚

å¦‚æœæ›´æ–°åä»æŠ¥é”™ï¼š æš‚æ—¶å¿½ç•¥ TypeScript è­¦å‘Šï¼ˆè¿™æ˜¯å¯ä»¥æ¥å—çš„ï¼‰ï¼Œç»§ç»­ä½¿ç”¨æ—§çš„å‘½åå¯¼å…¥ï¼Œå› ä¸ºå®ƒåœ¨ä½ çš„ç¯å¢ƒä¸­æ˜¯å·¥ä½œçš„ï¼š

TypeScript
import { presetUno } from 'unocss' // âš ï¸ å¿½ç•¥è¿™ä¸ª TypeScript è­¦å‘Š
// ...
presets: [ presetUno(), presetIcons() ] 
æ€»ç»“ï¼š è­¦å‘Šæ˜¯å› ä¸ºå¯¼å…¥æ–¹å¼è¿‡æ—¶äº†ã€‚æœ€ä½³åšæ³•æ˜¯åˆ‡æ¢åˆ°é»˜è®¤å¯¼å…¥ (import preset from 'unocss')ã€‚å¦‚æœé‡åˆ°è¿è¡Œæ—¶é”™è¯¯ï¼Œåˆ™åº”è¯¥å…ˆæ›´æ–°ä¾èµ–ï¼Œæˆ–æš‚æ—¶ä¿ç•™æ—§çš„å‘½åå¯¼å…¥ã€‚

äºŒã€éƒ¨ç½²åˆ° GitHubçš„pageså§:
åœ¨ GitHub Pages ä¸Šéƒ¨ç½²åŸºäº Vite çš„ Vue é¡¹ç›®ï¼ˆç‰¹åˆ«æ˜¯éƒ¨ç½²åˆ°å­ç›®å½•ï¼Œä¾‹å¦‚æ‚¨çš„ zhg-c.github.io/life ä»“åº“ï¼‰éœ€è¦ä¸€ä¸ªç‰¹å®šçš„æµç¨‹ï¼Œä¸»è¦æ¶‰åŠ Vite é…ç½® å’Œ éƒ¨ç½²è„šæœ¬ã€‚

ä»¥ä¸‹æ˜¯å®Œæ•´çš„æ­¥éª¤å’Œç›¸å…³ä»£ç ã€‚

æ­¥éª¤ 1: ç¡®ä¿ Vite é…ç½®æ­£ç¡® (é’ˆå¯¹å­ç›®å½•)
ç”±äºæ‚¨çš„ç½‘ç«™ä¸æ˜¯éƒ¨ç½²åœ¨æ ¹åŸŸåä¸‹ï¼ˆä¾‹å¦‚ä¸æ˜¯ zhg-c.github.ioï¼‰ï¼Œè€Œæ˜¯éƒ¨ç½²åœ¨å­è·¯å¾„ /life/ ä¸‹ï¼Œæ‚¨å¿…é¡»è®¾ç½® base å±æ€§ã€‚

è¯·å†æ¬¡æ£€æŸ¥æ‚¨çš„ vite.config.ts æ–‡ä»¶ï¼š

TypeScript

// vite.config.ts
// ç¡®ä¿å¯¼å…¥ defineConfig å’Œä½ çš„æ’ä»¶

const REPO_NAME = 'life' // âš ï¸ æ›¿æ¢æˆä½ çš„ä»“åº“å

export default defineConfig(({ command }) => {
  const isProd = command === 'build'
  
  return {
    // å…³é”®é…ç½®ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨ç»å¯¹è·¯å¾„ '/ä»“åº“å/'
    base: isProd ? `/${REPO_NAME}/` : '/', 

    plugins: [
      // ... ä½ çš„æ’ä»¶åˆ—è¡¨ ...
    ],
    // ...
  }
})
ä¸ºä»€ä¹ˆæ˜¯ /life/ï¼Ÿ
zhg-c.github.io/life/ å‘Šè¯‰æµè§ˆå™¨ï¼Œæ‰€æœ‰èµ„æºï¼ˆJS/CSS/å›¾ç‰‡ï¼‰éƒ½åº”è¯¥ä»è¿™ä¸ªè·¯å¾„çš„æ ¹ç›®å½•å¼€å§‹æŸ¥æ‰¾ã€‚

æ­¥éª¤ 2: åˆ›å»ºéƒ¨ç½²è„šæœ¬ (package.json)
ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª deploy è„šæœ¬ï¼Œå®ƒå°†æ‰§è¡Œæ„å»ºï¼Œå¹¶å°†æ„å»ºç»“æœæ¨é€åˆ° gh-pages åˆ†æ”¯ã€‚

A. å®‰è£…éƒ¨ç½²å·¥å…·
ä½ éœ€è¦å®‰è£… gh-pages å·¥å…·æ¥è‡ªåŠ¨åŒ–æ¨é€æµç¨‹ï¼š

Bash

npm install -D gh-pages
B. ä¿®æ”¹ package.json
åœ¨ä½ çš„ package.json æ–‡ä»¶ä¸­ï¼Œæ·»åŠ æˆ–ä¿®æ”¹ä»¥ä¸‹è„šæœ¬ï¼š

JSON

{
  "name": "your-project-name",
  "version": "0.0.0",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    // âœ¨ æ–°å¢éƒ¨ç½²è„šæœ¬ âœ¨
    "deploy": "npm run build && gh-pages -d dist -b gh-pages"
  },
  "homepage": "https://zhg-c.github.io/life/" // âš ï¸ å»ºè®®æ·»åŠ è¿™ä¸ªä¸»é¡µå­—æ®µ
  // ... å…¶ä»–ä¾èµ– ...
}
è„šæœ¬è¯´æ˜
è„šæœ¬éƒ¨åˆ†	ä½œç”¨
npm run build	å…ˆè¿è¡Œ Vite æ„å»ºï¼Œå°†æ‰€æœ‰é™æ€æ–‡ä»¶æ‰“åŒ…åˆ° dist ç›®å½•ã€‚
gh-pages	è°ƒç”¨éƒ¨ç½²å·¥å…·ã€‚
-d dist	æŒ‡å®šè¦éƒ¨ç½²çš„æºç›®å½•æ˜¯ distã€‚
-b gh-pages	æŒ‡å®šå°† dist ç›®å½•çš„å†…å®¹æ¨é€åˆ°åä¸º gh-pages çš„åˆ†æ”¯ä¸Šï¼ˆGitHub Pages é»˜è®¤è¯»å–çš„åˆ†æ”¯ï¼‰ã€‚

å¯¼å‡ºåˆ° Google è¡¨æ ¼

æ­¥éª¤ 3: æ‰§è¡Œéƒ¨ç½²
åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œè¿è¡Œéƒ¨ç½²å‘½ä»¤ï¼š

Bash

npm run deploy
è¿™ä¸ªå‘½ä»¤ä¼šï¼š

æ¸…ç†æ—§æ–‡ä»¶å¹¶è¿è¡Œ vite buildã€‚

å°† dist ç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹æäº¤åˆ°ä½ çš„ Git ä»“åº“çš„ gh-pages åˆ†æ”¯ã€‚

æ­¥éª¤ 4: æ£€æŸ¥ GitHub Pages è®¾ç½®
éƒ¨ç½²å®Œæˆåï¼Œä½ éœ€è¦æœ€åä¸€æ­¥æ£€æŸ¥ GitHub ä»“åº“è®¾ç½®ï¼š

æ‰“å¼€ä½ çš„ GitHub ä»“åº“ï¼ˆä¾‹å¦‚ zhg-c/lifeï¼‰ã€‚

ç‚¹å‡»é¡¶éƒ¨çš„ Settings (è®¾ç½®) é€‰é¡¹å¡ã€‚

ç‚¹å‡»å·¦ä¾§èœå•çš„ Pages (é¡µé¢)ã€‚

Source (æ¥æº)ï¼š ç¡®ä¿è¿™é‡Œè®¾ç½®ä¸ºä» gh-pages åˆ†æ”¯ å‘å¸ƒã€‚

ç­‰å¾…å‡ åˆ†é’Ÿï¼ˆé€šå¸¸ 1 åˆ° 10 åˆ†é’Ÿï¼‰è®© GitHub Pages æœåŠ¡å™¨åˆ·æ–°ã€‚ä½ çš„ç½‘ç«™åº”è¯¥å°±èƒ½é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®äº†ï¼š

https://zhg-c.github.io/life/

âš ï¸ æœ€ç»ˆæ£€æŸ¥ï¼šå…³äº Hash è·¯ç”±
ç”±äºä½ ä½¿ç”¨çš„æ˜¯ Hash è·¯ç”± (createWebHashHistory)ï¼Œåœ¨å­ç›®å½•éƒ¨ç½²æ—¶ä¸éœ€è¦è¿›è¡Œ 404 é¡µé¢é‡å®šå‘ï¼Œè¿™æ˜¯æœ€å¯é çš„éƒ¨ç½²æ–¹å¼ã€‚åªè¦ base è·¯å¾„æ­£ç¡®ï¼Œä¸€åˆ‡å°±èƒ½æ­£å¸¸å·¥ä½œã€‚

"homepage": "https://zhg-c.github.io/life/"é‚£å¦‚æœæˆ‘ä¹°äº†é˜¿é‡Œäº‘çš„æœåŠ¡å™¨å’ŒåŸŸåï¼Œè¿™å¥è¯ä¼šæœ‰å½±å“å—

è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ° å‰ç«¯éƒ¨ç½² å’Œ åç«¯æœåŠ¡ çš„æ ¸å¿ƒæ¦‚å¿µåˆ†ç¦»ã€‚

ç®€çŸ­çš„å›ç­”æ˜¯ï¼šå½“ä½ ä½¿ç”¨é˜¿é‡Œäº‘æœåŠ¡å™¨å’Œè‡ªå®šä¹‰åŸŸåæ—¶ï¼Œpackage.json ä¸­çš„ "homepage" å­—æ®µå°±å˜å¾—ä¸å†é‡è¦ï¼Œé€šå¸¸å¯ä»¥ç›´æ¥åˆ é™¤æˆ–å¿½ç•¥ã€‚

è¯¦ç»†è§£é‡Šï¼š"homepage" å­—æ®µçš„ä½œç”¨å’Œå½±å“
1. åœ¨ GitHub Pages éƒ¨ç½²ä¸­çš„ä½œç”¨
åœ¨ä½ çš„ GitHub Pages åœºæ™¯ä¸­ï¼Œ"homepage" å­—æ®µçš„ä¸»è¦ä½œç”¨æ˜¯ï¼š

æ–‡æ¡£è¯´æ˜ï¼š æ˜ç¡®å‘Šè¯‰å¼€å‘è€…å’Œç”¨æˆ·ï¼Œè¿™ä¸ªé¡¹ç›®æœ€ç»ˆçš„éƒ¨ç½²åœ°å€æ˜¯ä»€ä¹ˆã€‚

éƒ¨ç½²å·¥å…· (å¦‚ gh-pages) çš„æç¤ºï¼š æŸäº›éƒ¨ç½²å·¥å…·å¯èƒ½ä¼šè¯»å–è¿™ä¸ªå­—æ®µæ¥ç¡®è®¤éƒ¨ç½²çš„ä¸Šä¸‹æ–‡ï¼Œä½†è¿™ä¸æ˜¯å¿…éœ€çš„ã€‚

æœ€æ ¸å¿ƒçš„è·¯ç”±å½±å“ æ˜¯ç”± Vite é…ç½® ä¸­çš„ base: '/life/' å†³å®šçš„ï¼Œè€Œä¸æ˜¯ "homepage" å­—æ®µã€‚

2. è¿ç§»åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨å’Œè‡ªå®šä¹‰åŸŸååçš„å˜åŒ–
å½“ä½ å°†å‰ç«¯é¡¹ç›®éƒ¨ç½²åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼ˆæˆ–å…¶ä»–ä»»ä½•å•†ä¸šä¸»æœºï¼‰å¹¶ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼ˆä¾‹å¦‚ www.yourdomain.comï¼‰æ—¶ï¼š

å› ç´ 	GitHub Pages	é˜¿é‡Œäº‘ / è‡ªå®šä¹‰åŸŸå
"homepage"	è¾…åŠ©è¯´æ˜éƒ¨ç½²åœ°å€ã€‚	æ— ç”¨ï¼Œå¯ä»¥åˆ é™¤ã€‚
éƒ¨ç½²ä½ç½®	å›ºå®šçš„å­ç›®å½• zhg-c.github.io/life/ã€‚	é€šå¸¸éƒ¨ç½²åœ¨åŸŸåçš„æ ¹ç›®å½• www.yourdomain.com/ã€‚
Vite base	å¿…é¡»è®¾ç½®ä¸º base: '/life/'ã€‚	å¿…é¡»è®¾ç½®ä¸º base: '/' æˆ–ç›´æ¥çœç•¥ï¼ˆé»˜è®¤å°±æ˜¯ /ï¼‰ã€‚
è·¯ç”±æ¨¡å¼	createWebHashHistory() (Hash æ¨¡å¼) æœ€å®‰å…¨ã€‚	createWebHistory() (History æ¨¡å¼) æ›´ç¾è§‚ï¼Œä½†éœ€è¦æœåŠ¡å™¨é…ç½®æ”¯æŒã€‚
âš ï¸ å…³é”®æ“ä½œï¼šä¿®æ”¹ Vite base é…ç½®
å¦‚æœä½ å°†é¡¹ç›®éƒ¨ç½²åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨çš„æ ¹ç›®å½•ï¼ˆhttps://www.yourdomain.com/ï¼‰ï¼Œä½ å¿…é¡»ä¿®æ”¹ vite.config.ts ä¸­çš„ base è·¯å¾„ï¼š

TypeScript
// vite.config.ts

const REPO_NAME = 'life' 

export default defineConfig(({ command }) => {
  const isProd = command === 'build'
  
  return {
    // âŒ é”™è¯¯ï¼šä»ä½¿ç”¨å­ç›®å½•è·¯å¾„
    // base: isProd ? `/${REPO_NAME}/` : '/', 

    // âœ… æ­£ç¡®ï¼šéƒ¨ç½²åˆ°æ ¹åŸŸåæ—¶ï¼Œbase å¿…é¡»æ˜¯ '/'
    base: '/', 
    
    // ...
  }
})
æ€»ç»“
"homepage" å­—æ®µåœ¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘åæ²¡æœ‰å½±å“ï¼Œä½ å¯ä»¥ç›´æ¥ç§»é™¤å®ƒã€‚

çœŸæ­£æœ‰å½±å“çš„æ˜¯ Vite çš„ base è·¯å¾„ã€‚éƒ¨ç½²åˆ°è‡ªå®šä¹‰åŸŸåçš„æ ¹ç›®å½•æ—¶ï¼Œå¿…é¡»å°† base è®¾ä¸º /ï¼Œå¦åˆ™æµè§ˆå™¨ä¼šå» www.yourdomain.com/life/js/... æŸ¥æ‰¾èµ„æºï¼Œå¯¼è‡´é¡µé¢ç©ºç™½ã€‚

å¦‚æœåˆ‡æ¢åˆ°é˜¿é‡Œäº‘ï¼Œå»ºè®®è€ƒè™‘å°† Vue Router çš„ History æ¨¡å¼ä» createWebHashHistory() åˆ‡æ¢åˆ° createWebHistory()ï¼Œä»¥è·å¾—æ›´æ¼‚äº®çš„ URLï¼ˆæ²¡æœ‰ #ï¼‰ï¼Œä½†éœ€è¦é¢å¤–é…ç½®é˜¿é‡Œäº‘æœåŠ¡å™¨çš„ 404 é¡µé¢é‡å®šå‘ åˆ° index.htmlã€‚

ä¸‰ã€Cannot find module 'virtual:generated-pages' or its corresponding type declarations.t
	å½“è¿™ä¸ªæç¤ºå‡ºç°æ—¶ï¼šåœ¨ src ç›®å½•ä¸‹æ·»åŠ æ–‡ä»¶ vite-env.d.ts,å…¶å†…å®¹ä¸ºï¼š
	// src/shims-vue.d.ts (ç¤ºä¾‹æ–‡ä»¶å)

// å‘Šè¯‰ TypeScript è™šæ‹Ÿæ¨¡å— 'virtual:generated-pages' çš„ç±»å‹
declare module 'virtual:generated-pages' {
  import type { RouteRecordRaw } from 'vue-router'
  // å£°æ˜å®ƒé»˜è®¤å¯¼å‡ºä¸€ä¸ª RouteRecordRaw æ•°ç»„
  const routes: RouteRecordRaw[]
  export default routes
}